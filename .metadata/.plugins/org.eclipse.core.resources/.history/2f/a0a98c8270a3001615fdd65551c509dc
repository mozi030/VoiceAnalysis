package VoiceFileTransform;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.nio.file.Files;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioFormat.Encoding;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

public class VoicePreProcess {
	static private String sourcePath = "/Users/moziliang/Documents/香港留学/2class/1Mutimedia(ROSSITER)/project/voice/all_voice_source";

	static private String outputPath = "/Users/moziliang/Documents/香港留学/2class/1Mutimedia(ROSSITER)/project/voice/all_voice_source_processed";
	
	static public void main(String[] args) throws Exception {
		File sourceFolder = new File(sourcePath);

		for (final File file1 : sourceFolder.listFiles()) {
			if (isChar(file1.getName().charAt(0))) {
				for (final File file2 : file1.listFiles()) {
					if (isChar(file2.getName().charAt(0))) {
						WeChatWavFormat wavFormat = WeChatWavFormat.readAndCheckFile(file2);

						
						
						String tempPath = outputPath + "/" + file1.getName() + "/" + file2.getName();
						
						String outputString = "";
						for (int i = 0; i < wavFormat.samples.length; i++) {
							bufferedWriter.write((int)wavFormat.samples[i]);
						}
						
//						byte[] currentBytes = WeChatWavFormat.transferWavFormatToBytes(wavFormat);
//    					FileOutputStream fos = new FileOutputStream(tempPath);
//    					fos.write(currentBytes);
//    					fos.close();
    					
    					System.out.println();
					}
				}
			}
		}
	}

	static public boolean isChar(char a) {
		return (a >= 'a' && a <= 'z') || (a >= 'A' && a <= 'Z');
	}
	
}
